---
title: "1450 - åœ¨æ—¢å®šæ—¶é—´åšä½œä¸šçš„å­¦ç”Ÿäººæ•°"
date: 2022-08-22T23:32:09+08:00
description: "ä¸€ðŸŸäº”åƒ"
featured_image: "https://pic.danic.tech/blog/bg/bg-30.jpg"
tags: ["leetcode", "åŒºé—´"]
---

# é¢˜

> #### [1450. åœ¨æ—¢å®šæ—¶é—´åšä½œä¸šçš„å­¦ç”Ÿäººæ•°](https://leetcode.cn/problems/number-of-students-doing-homework-at-a-given-time/)
>
> ç»™ä½ ä¸¤ä¸ªæ•´æ•°æ•°ç»„ `startTime`ï¼ˆå¼€å§‹æ—¶é—´ï¼‰å’Œ `endTime`ï¼ˆç»“æŸæ—¶é—´ï¼‰ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªæ•´æ•° `queryTime` ä½œä¸ºæŸ¥è¯¢æ—¶é—´ã€‚
>
> å·²çŸ¥ï¼Œç¬¬ `i` åå­¦ç”Ÿåœ¨ `startTime[i]` æ—¶å¼€å§‹å†™ä½œä¸šå¹¶äºŽ `endTime[i]` æ—¶å®Œæˆä½œä¸šã€‚
>
> è¯·è¿”å›žåœ¨æŸ¥è¯¢æ—¶é—´ `queryTime` æ—¶æ­£åœ¨åšä½œä¸šçš„å­¦ç”Ÿäººæ•°ã€‚å½¢å¼ä¸Šï¼Œè¿”å›žèƒ½å¤Ÿä½¿ `queryTime` å¤„äºŽåŒºé—´ `[startTime[i], endTime[i]]`ï¼ˆå«ï¼‰çš„å­¦ç”Ÿäººæ•°ã€‚
>
>  
>
> **ç¤ºä¾‹ 1ï¼š**
>
> ```
> è¾“å…¥ï¼šstartTime = [1,2,3], endTime = [3,2,7], queryTime = 4
> è¾“å‡ºï¼š1
> è§£é‡Šï¼šä¸€å…±æœ‰ 3 åå­¦ç”Ÿã€‚
> ç¬¬ä¸€åå­¦ç”Ÿåœ¨æ—¶é—´ 1 å¼€å§‹å†™ä½œä¸šï¼Œå¹¶äºŽæ—¶é—´ 3 å®Œæˆä½œä¸šï¼Œåœ¨æ—¶é—´ 4 æ²¡æœ‰å¤„äºŽåšä½œä¸šçš„çŠ¶æ€ã€‚
> ç¬¬äºŒåå­¦ç”Ÿåœ¨æ—¶é—´ 2 å¼€å§‹å†™ä½œä¸šï¼Œå¹¶äºŽæ—¶é—´ 2 å®Œæˆä½œä¸šï¼Œåœ¨æ—¶é—´ 4 æ²¡æœ‰å¤„äºŽåšä½œä¸šçš„çŠ¶æ€ã€‚
> ç¬¬ä¸‰åå­¦ç”Ÿåœ¨æ—¶é—´ 3 å¼€å§‹å†™ä½œä¸šï¼Œé¢„è®¡äºŽæ—¶é—´ 7 å®Œæˆä½œä¸šï¼Œè¿™æ˜¯æ˜¯å”¯ä¸€ä¸€ååœ¨æ—¶é—´ 4 æ—¶æ­£åœ¨åšä½œä¸šçš„å­¦ç”Ÿã€‚
> ```
>
> 
>
> æç¤ºï¼š
>
> startTime.length == endTime.length
> 1 <= startTime.length <= 100
> 1 <= startTime[i] <= endTime[i] <= 1000
> 1 <= queryTime <= 1000



# æž

åŒºé—´å†…åŠ å‡æ“ä½œï¼Œæœ‰å¾ˆå¤šè§£é¢˜æ€è·¯ï¼Œå·®åˆ†ã€æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ã€‚æœ¬é¢˜è¿˜å¯ä»¥ä½¿ç”¨æš´åŠ›ã€äºŒåˆ†ç­‰ç®—æ³•å®žçŽ°ï¼Œå…¨é±¼å®´äº†å±žäºŽæ˜¯ã€‚



# è§£

1. æš´åŠ›

   ```go
    func busyStudent(startTime []int, endTime []int, queryTime int) int {
       ans := 0
       for i := range startTime {
           if startTime[i] <= queryTime && endTime[i] >= queryTime {
               ans++
           }
       }
       return ans
    }
   ```

2. äºŒåˆ†

   ```go
   func BisectLeft(arr []int, target int) int {
       l, r := 0, len(arr)
       for l < r {
           m := l + (r-l)>>1
           if arr[m] >= target {
               r = m
           } else {
               l = m + 1
           }
       }
       return l
   }
   func BisectRight(arr []int, target int) int {
       l, r := 0, len(arr)
       for l < r {
           m := l + (r-l)>>1
           if arr[m] <= target {
               l = m + 1
           } else {
               r = m
           }
       }
       return l
   }
   
   func busyStudent(startTime []int, endTime []int, queryTime int) int {
       // ä¸»ä½“æ€æƒ³æ˜¯æ‹¿æŸ¥è¯¢æ—¶é—´ä¹‹å‰ï¼ˆåŒ…å«æŸ¥è¯¢æ—¶é—´ï¼‰å¼€å§‹çš„å­¦ç”Ÿæ•°é‡xï¼Œå‡åŽ»æŸ¥è¯¢æ—¶é—´ä¹‹å‰(ä¸åŒ…å«æŸ¥è¯¢æ—¶é—´)ç»“æŸçš„å­¦ç”Ÿæ•°é‡y
       // å¾—åˆ°çš„å°±æ˜¯æŸ¥è¯¢æ—¶é—´ç‚¹åœ¨åšä½œä¸šçš„äººæ•°
       sort.Ints(startTime)
       sort.Ints(endTime)
       return BisectRight(startTime, queryTime) - BisectLeft(endTime, queryTime)
   }
   ```

   

3. å·®åˆ†

    ```go
    func busyStudent(startTime []int, endTime []int, queryTime int) int {
    	maxTime := 0
    	// ç¡®å®šæœ€å¤§æ—¶åˆ»
    	for _, v := range endTime {
    		if v > maxTime {
    			maxTime = v
    		}
    	}
    
    	// å·®åˆ†æ•°ç»„
    	cnt := make([]int, maxTime+2)
    	for i := range startTime {
    		// åœ¨å¼€å§‹æ—¶åˆ»åŠ 1
    		cnt[startTime[i]] += 1
    		// åœ¨ç»“æŸçš„åŽä¸€æ—¶åˆ»å‡1
    		cnt[endTime[i]+1] -= 1
    	}
    
    	// ç´¯åŠ å˜é‡
    	sum := 0
    	for i, v := range cnt {
    		sum += v
    		// ä¸€ç›´æŸ¥è¯¢ç›´åˆ°æŒ‡å®šæ—¶åˆ»
    		if i >= queryTime {
    			break
    		}
    	}
    	return sum
    }
    ```

4. æ ‘çŠ¶æ•°ç»„

    ```go
    const Max = 1005
    type BitTree struct {
        arr []int
    }
    
    func lowbit(x int) int {
        return x & (-x)
    }
    
    func (bt *BitTree) Add(pos int, delta int) {
        pos += 1
        for ; pos < Max; pos += lowbit(pos) {
            bt.arr[pos] += delta
        }
    }
    
    func (bt *BitTree) Sum(pos int) int {
        pos += 1
        sum := 0
        for ; pos > 0; pos -= lowbit(pos) {
            sum += bt.arr[pos]
        }
        return sum
    }
    
    func busyStudent(startTime []int, endTime []int, queryTime int) int {
        bt := &BitTree{make([]int, Max)}
    
        for i := range startTime {
            bt.Add(startTime[i], 1)
            bt.Add(endTime[i]+1, -1)
        }
    
        return bt.Sum(queryTime)
    }
    ```

    

5. çº¿æ®µæ ‘

    ```go
    
    type Node struct {
    	l   *Node
    	r   *Node
    	val int
    	add int
    }
    
    // ä¸‹æŽ¨æ ‡è®°
    func (n *Node) PushDown(lCnt, rCnt int) {
    	if n.l == nil {
    		n.l = &Node{}
    	}
    	if n.r == nil {
    		n.r = &Node{}
    	}
    	if n.add == 0 {
    		return
    	}
    	n.l.val += lCnt * n.add
    	n.r.val += rCnt * n.add
    	n.l.add += n.add
    	n.r.add += n.add
    	n.add = 0
    }
    
    // æ•°æ®æ±‡èš
    func (n *Node) PushUp() {
    	n.val = n.l.val + n.r.val
    }
    
    func (n *Node) _update(l, r int, s, e int, delta int) {
    	if s >= l && e <= r {
    		n.val += delta * (e - s + 1)
    		n.add += delta
    		return
    	}
    	m := s + (e-s)>>1
    	n.PushDown(m-s+1, e-m)
    	if l <= m {
    		n.l._update(l, r, s, m, delta)
    	}
    	if r > m {
    		n.r._update(l, r, m+1, e, delta)
    	}
    	n.PushUp()
    }
    
    func (n *Node) Update(l, r int, delta int) {
    	n._update(l, r, 0, int(1e9), delta)
    }
    
    func (n *Node) _range(l, r int, s, e int) int {
    	if s >= l && e <= r {
    		return n.val
    	}
    	m := s + (e-s)>>1
    	n.PushDown(m-s+1, e-m)
    	sum := 0
    	if l <= m {
    		sum += n.l._range(l, r, s, m)
    	}
    	if r > m {
    		sum += n.r._range(l, r, m+1, e)
    	}
    	return sum
    }
    
    func (n *Node) Range(l, r int) int {
    	return n._range(l, r, 0, int(1e9))
    }
    
    func busyStudent(startTime []int, endTime []int, queryTime int) int {
    	st := &Node{}
    	for i := range startTime {
    		st.Update(startTime[i], endTime[i], 1)
    	}
    	return st.Range(queryTime, queryTime)
    }
    ```

    